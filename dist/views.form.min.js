!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("views"),require("orange")):"function"==typeof define&&define.amd?define(["views","orange"],t):"object"==typeof exports?exports.form=t(require("views"),require("orange")):(e.views=e.views||{},e.views.form=t(e.views,e.orange))}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(1));var i=n(17);t.editor=i.editor;var o=n(9);t.BaseEditor=o.BaseEditor,t.BaseLayoutEditor=o.BaseLayoutEditor;var a=n(3);t.Field=a.Field,r(n(11)),n(18)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=n(2),h=n(3),d=n(4),p=n(12),v=p("views:form"),g=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._fields=[],n._isRendered=!1,e=e||{},n._options=d.extend({},{createHelpAreas:!1,validateOnChange:!0,fields:{},fieldSelector:".field"},e),n}return o(t,e),a(t,[{key:"getFieldByName",value:function(e){for(var t=0,n=this.fields.length;t<n;t++)if(this.fields[t].name===e)return this.fields[t];return null}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isRendered=!1,e.silent||this.triggerMethod("before:render"),this.undelegateEvents(),this.renderTemplate(this.getTemplateData()),this._renderFields(),this.delegateEvents(),this._isRendered=!0,e.silent||this.triggerMethod("render"),this._setValue(this.model),this}},{key:"update",value:function(){return null==this.model?this:(this._model.set(this.value),this)}},{key:"setModel",value:function(e){if(e!==this.model)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setModel",this).call(this,e),this._setValue(e),null!=e&&this.listenTo(e,"change",this._onModelValueChange),this}},{key:"validate",value:function(){return this.fields.map(function(e){return e.validate()}).filter(function(e){return null!=e})}},{key:"clear",value:function(){return this._fields?void this._fields.forEach(function(e){return e.clear()}):this}},{key:"_setValue",value:function(e){var t=this;this._isRendered&&(this.clear(),null!=e&&this.fields.forEach(function(n){void 0!==e.get(n.name)?n.editor.value=e.get(n.name):t.model.set(n.name,n.editor.value,{silent:!0})}))}},{key:"_renderFields",value:function(){var e=this;this.triggerMethod("before:render:fields"),this._fields.forEach(function(t){e.stopListening(t),t.destroy()}),this._fields=[];var t=this.el.querySelectorAll(this.options.fieldSelector);v("found %i fields",t.length);for(var n,r=[],i=0,o=t.length;i<o;i++)try{var a=t[i].querySelector("[name]"),s="";a&&(s=a.getAttribute("name"));var l=d.extend({createHelpArea:this.options.createHelpAreas||!1},this.options.fields[s]||{},{form:this});v("create field: %s",s),n=h.Field.createField(t[i],l),this._fields.push(n),this.listenTo(n,"change",this._onFieldValueChanged)}catch(e){r.push(e)}this._fields.forEach(function(e){e.render()}),r.length&&this.triggerMethod("render:fields:error",r),this.triggerMethod("render:fields")}},{key:"_onModelValueChange",value:function(e){for(var t in e.changed){var n=this.getFieldByName(t);null!=n&&(n.editor.value=e.get(t))}}},{key:"_onFieldValueChanged",value:function(e){this.trigger("change"),this.options.validateOnChange&&e.validate()||this.model&&this.model.set(e.name,e.editor.value)}},{key:"_onFieldEventTriggered",value:function(e,t){if(console.log(e),"change"===e){if(this.trigger("change"),this.options.validateOnChange&&t.validate())return;this.model&&this.model.set(t.name,t.editor.value)}for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.triggerMethod.apply(this,["field:"+e,t].concat(r))}},{key:"destroy",value:function(){return this._fields.forEach(function(e){return e.destroy()}),this._fields=[],s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"options",get:function(){return this._options}},{key:"fields",get:function(){return[].concat(this._fields)}},{key:"value",get:function(){var e={};return this.fields.forEach(function(t){e[t.name]=t.value}),e},set:function(e){null==e?this.fields.forEach(function(e){return e.editor.clear()}):this.fields.forEach(function(t){void 0!==e[t.name]&&(t.editor.value=e[t.name])})}}]),t}(f.View);g=u([f.attributes({tagName:"form",events:{}}),c("design:paramtypes",[Object])],g),t.Form=g},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},u=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=n(2),f=n(4),h=n(5),d=n(9),p=n(17),v=n(12),g=v("views:form:field"),y=void 0,m=y=function(e){function t(e){if(r(this,t),null==e)throw new Error("field options required");if(null==e.form)throw new Error("form required");var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._options=e,n._form=e.form,n}return o(t,e),a(t,[{key:"clear",value:function(){this.editor&&this.editor.clear(),h.removeClass(this.el,"has-success has-error"),h.Html.query(".form-field-helparea").html("")}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.silent||this.triggerMethod("before:render"),this.undelegateEvents(),this.renderTemplate(this.getTemplateData()),!this._editor){var t=this.el.querySelector("[name]");if(!t)throw new Error("no editor or no input with name attribute");var n=t.getAttribute("form-editor"),r=f.extend({},this._options||{},{el:t}),i=t.getAttribute("name");if(n){var o=p.getEditor(n,r);o&&(g("%s: found custom editor type: %s",i,n),this.editor=o)}if(null==this.editor){var a=p.getEditor(t.nodeName.toLowerCase(),r);a?(g("%s: found custom editor type from tag: %s",i,t.nodeName.toLowerCase()),this.editor=a):this.editor=new d.Editor(r)}}return this._options.createHelpArea&&this.createHelpArea(),this.editor.render(),this.delegateEvents(),e.silent||this.triggerMethod("render"),this}},{key:"createHelpArea",value:function(){var e=this.el.querySelector(".form-field-helparea");e||(g("%s: creating help area",this.name),this.triggerMethod("before:helparea"),e=h.createElement("div",{class:"form-field-helparea"}),this.el.appendChild(e))}},{key:"validate",value:function(){if(!this.editor)return null;var e=h.Html.query(this.el),t=this.editor.validate(this._form),n=this.el.querySelector(".form-field-helparea");if(null==t)return e.addClass("has-success").removeClass("has-error"),void(n&&(n.innerHTML=""));if(e.addClass("has-error").removeClass("has-success"),n){var r=void 0;if(1===t.errors.length)r="<span>"+t.errors[0].message+"</span>";else{var i=t.errors.map(function(e){return"<li>"+e.message+"</li>"}).join("");r="<ul>"+i+"</ul>"}n.innerHTML=r}return t}},{key:"_onEditorChange",value:function(){this.triggerMethod("change",this)}},{key:"name",get:function(){return this._editor?this._editor.name:"no-name"}},{key:"label",get:function(){var e=this.el.querySelector("form-field-label");return e?e.textContent:this.name}},{key:"value",get:function(){return this.editor?this.editor.value:null},set:function(e){this.editor&&(this.editor.value=e)}},{key:"editor",set:function(e){this._editor&&(this.stopListening(this._editor),this._editor.destroy()),this._editor=e,null!=e&&this.listenTo(e,"change",this._onEditorChange)},get:function(){return this._editor}}],[{key:"createField",value:function(e,t){var n=e.querySelector("[name]");if(null==n)throw new Error("field doest not contain an element");var r=f.extend({},t||{},{el:e});return new y(r)}}]),t}(c.View);m=y=l([c.attributes({tagName:"div",className:"form-field"}),u("design:paramtypes",[Object])],m),t.Field=m},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(6)),r(n(7)),r(n(8))},function(e,t,n){"use strict";function r(e,t){return y.call(e,t)}function i(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];m.call(e,t,n,r)}function o(e,t,n){b.call(e,t,n)}function a(e,t,n,o,a){var s=e,l=function(e){var n=e.target||e.srcElement;if(!e.delegateTarget)for(;n&&n!=s;n=n.parentNode)r(n,t)&&(e.delegateTarget=n,o(e))},u=!!~E.indexOf(n);return i(e,n,l,u),k.push({eventName:n,handler:l,listener:o,selector:t}),l}function s(e,t,n,r){for(var i=k.slice(),a=0,s=i.length;a<s;a++){var l=i[a],u=!(l.eventName!==n||r&&l.listener!==r||t&&l.selector!==t);u&&(o(e,l.eventName,l.handler),k.splice(v.indexOf(i,l),1))}}function l(e,t){if(e.classList)for(var n=t.split(" "),r=0,i=n.length;r<i;r++)e.classList.contains(n[r].trim())||e.classList.add(n[r].trim());else e.className=v.unique(e.className.split(" ").concat(t.split(" "))).join(" ")}function u(e,t){if(e.classList)for(var n=t.split(" "),r=0,i=n.length;r<i;r++)e.classList.remove(n[r].trim());else for(var o=e.className.split(" "),a=t.split(" "),s=void 0,l=0,u=a.length;l<u;l++)s=o.indexOf(a[l]),~s&&(o=o.splice(s,1))}function c(e,t){if(e.classList)return e.classList.contains(t);var n=new RegExp("\b"+t);return n.test(e.className)}function f(e){if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}}function h(e,t,n,r){var a=O.transitionEnd||(O.transitionEnd=_()),s=function r(i){o(e,a,r),t.call(n,i)};i(e,a,s)}function d(e,t,n,r){var a=O.animationEnd||(O.animationEnd=w()),s=function r(i){o(e,a,r),t.call(n,i)};i(e,a,s)}function p(e,t){var n=document.createElement(e);if(t)for(var r in t)n.setAttribute(r,t[r]);return n}var v=n(4),g="undefined"!=typeof Element&&Element.prototype||{},y=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||function(e){var t=(this.parentNode||document).querySelectorAll(e)||[];return!!~v.indexOf(t,this)},m=g.addEventListener||function(e,t){return this.attachEvent("on"+e,t)},b=g.removeEventListener||function(e,t){return this.detachEvent("on"+e,t)},_=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return null},w=function(){var e=document.createElement("bootstrap"),t={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in t)if(void 0!==e.style[n])return t[n];return null};t.matches=r,t.addEventListener=i,t.removeEventListener=o;var E="focus blur change load error".split(" "),k=[];t.delegate=a,t.undelegate=s,t.addClass=l,t.removeClass=u,t.hasClass=c,t.selectionStart=f;var O={animationEnd:null,transitionEnd:null};t.transitionEnd=h,t.animationEnd=d,t.domReady=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,e=function(){for(n.removeEventListener(i,e),o=!0;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}}(),t.createElement=p},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=u.exec(e);if(t)return document.createElement(t[0]);var n=document.createElement("div");n.innerHTML=e;var r=n.firstChild;return r}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),l=n(6),u=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,c=function(){function e(t){i(this,e),Array.isArray(t)||(t=[t]),this._elements=t||[]}return a(e,[{key:"get",value:function(e){return e=void 0===e?0:e,e>=this.length?void 0:this._elements[e]}},{key:"addClass",value:function(e){return this.forEach(function(t){l.addClass(t,e)})}},{key:"removeClass",value:function(e){return this.forEach(function(t){l.removeClass(t,e)})}},{key:"hasClass",value:function(e){return this._elements.reduce(function(t,n){return l.hasClass(n,e)},!1)}},{key:"attr",value:function e(t,n){var e=void 0;if("string"==typeof t&&n)e=r({},t,n);else if("string"==typeof t){if(this.length)return this.get(0).getAttribute(t)}else s.isObject(t)&&(e=t);return this.forEach(function(t){for(var n in e)t.setAttribute(n,e[n])})}},{key:"text",value:function(e){return 0===arguments.length?this.length>0?this.get(0).textContent:null:this.forEach(function(t){return t.textContent=e})}},{key:"html",value:function(e){return 0===arguments.length?this.length>0?this.get(0).innerHTML:null:this.forEach(function(t){return t.innerHTML=e})}},{key:"css",value:function(e,t){return 2===arguments.length?this.forEach(function(n){e in n.style&&(n.style[e]=String(t))}):this.forEach(function(t){for(var n in e)n in t.style&&(t.style[n]=String(e[n]))})}},{key:"parent",value:function(){var t=[];return this.forEach(function(e){e.parentElement&&t.push(e.parentElement)}),new e(t)}},{key:"remove",value:function(){return this.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)})}},{key:"clone",value:function(){return new e(this.map(function(e){return e.cloneNode()}))}},{key:"find",value:function(t){var n=[];return this.forEach(function(e){n=n.concat(s.slice(e.querySelectorAll(t)))}),new e(n)}},{key:"map",value:function(e){var t=new Array(this.length);return this.forEach(function(n,r){t[r]=e(n,r)}),t}},{key:"forEach",value:function(e){return this._elements.forEach(e),this}},{key:"length",get:function(){return this._elements.length}}],[{key:"query",value:function(t,n){"string"==typeof n&&(n=document.querySelectorAll(n));var r=void 0,i=void 0;if("string"==typeof t){if(t.length>0&&"<"===t[0]&&">"===t[t.length-1]&&t.length>=3)return new e([o(t)]);if(n){if(!(n instanceof HTMLElement))return r=new e(s.slice(n)),r.find(t);i=s.slice(n.querySelectorAll(t))}else i=s.slice(document.querySelectorAll(t))}else t&&t instanceof Element?i=[t]:t&&t instanceof NodeList&&(i=s.slice(t));return new e(i)}}]),e}();t.Html=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return new a.Promise(function(r,i){var o=new l(e,t,n);o.check(function(e){return e?i(e):void r(o.isLoaded)})})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=n(6),l=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?200:arguments[1],i=arguments.length<=2||void 0===arguments[2]?10:arguments[2];r(this,e),this.img=t,this.timeout=n,this.retries=i,this.__resolved=!1}return o(e,[{key:"check",value:function(e){var t=this;this.fn=e;var n=this.getIsImageComplete();if(n)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var r=this.retries,i=function e(){setTimeout(function(){if(!t.__resolved)return t.img.naturalWidth>0?(t.__resolved=!0,t.onload(null)):void(r>0&&(r--,e()))},t.timeout)};i(),s.addEventListener(this.img,"load",this),s.addEventListener(this.img,"error",this)}},{key:"confirm",value:function(e,t,n){this.__resolved=!0,this.isLoaded=e,this.fn&&this.fn(n)}},{key:"getIsImageComplete",value:function(){return this.img.complete&&void 0!==this.img.naturalWidth&&0!==this.img.naturalWidth}},{key:"handleEvent",value:function(e){var t="on"+event.type;this[t]&&this[t](event)}},{key:"onload",value:function(e){this.confirm(!0,"onload"),this.unbindEvents()}},{key:"onerror",value:function(e){this.confirm(!1,"onerror",new Error(e.error)),this.unbindEvents()}},{key:"unbindEvents",value:function(){s.removeEventListener(this.img,"load",this),s.removeEventListener(this.img,"error",this),this.fn=void 0}}]),e}();t.imageLoaded=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},u=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=n(2),f=n(10),h=n(11),d=n(4),p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=e,n}return o(t,e),a(t,[{key:"clear",value:function(){this.triggerMethod("before:clear"),this.setValue(this.options.defaultValue?this.options.defaultValue:null),this.triggerMethod("clear")}},{key:"validate",value:function(e){return h.validate(e,this,this.value)}},{key:"name",get:function(){return this.el.getAttribute("name")}},{key:"value",get:function(){return this.getValue()},set:function(e){d.equal(e,this.getValue())||this.setValue(e)}}]),t}(c.View);t.BaseEditor=p;var v=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.options=e,n}return o(t,e),a(t,[{key:"clear",value:function(){this.triggerMethod("before:clear"),this.setValue(this.options.defaultValue?this.options.defaultValue:null),this.triggerMethod("clear")}},{key:"validate",value:function(e){return h.validate(e,this,this.value)}},{key:"name",get:function(){return this.el.getAttribute("name")}},{key:"value",get:function(){return this.getValue()},set:function(e){d.equal(e,this.getValue())||(this.triggerMethod("before:set:value",e),this.setValue(e),this.triggerMethod("set:value",e))}}]),t}(c.View);t.BaseLayoutEditor=v;var g=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"setValue",value:function(e){f.setValue(this.el,e)}},{key:"getValue",value:function(){return f.getValue(this.el)}},{key:"_onKeyPress",value:function(e){this._prev=this.getValue(),this.triggerMethod("change")}},{key:"_onChange",value:function(e){d.equal(this._prev,this.getValue())||(this._prev=this.getValue(),this.triggerMethod("change"))}},{key:"name",get:function(){return this.el.getAttribute("name")}}]),t}(p);g=l([c.attributes({tagName:"input",events:{keyup:"_onKeyPress",change:"_onChange"}}),u("design:paramtypes",[])],g),t.Editor=g},function(e,t){"use strict";function n(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.replace(l,function(e,r){for(var i=r.split("."),o=i.length,a=t,s=0;s<o;s++){if(a=a[i[s]],a===u){if(n)throw new Error("templ: '"+i[s]+"' not found in "+e);a=""}if(s===o-1)return a}return a})}function r(e,t){var n=e,i=/checkbox/.test(n.type),o=/radio/.test(n.type),a=i||o,s=Object.prototype.hasOwnProperty.call(n,"value"),l=s||/input|textarea|checkbox/.test(n.nodeName.toLowerCase()),u=/select/i.test(n.nodeName);if(1===arguments.length){if(i)return Boolean(n.checked);if(u)return n.value||"";if(l){var c=n.value||"";return n.type&&"number"===n.type.toLowerCase()&&(c=parseInt(c),c=isNaN(c)?0:c),c}return n.innerHTML||""}null==t&&(t=""),a?o?String(t)===String(n.value)&&(n.checked=!0):n.checked=t:String(t)!==r(e)&&(l||u?n.value=t:n.innerHTML=t)}function i(e,t){r(e,t)}var o="<%",a="%>",s="[a-z0-9_$][\\.a-z0-9_]*",l=new RegExp(o+"\\s*("+s+")\\s*"+a,"gi"),u=void 0;t.template=n,t.getValue=r,t.setValue=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=Object.keys(y).map(function(t){if("required"===t)return null;var n=e.getAttribute("validate-"+t);return null==n&&e.getAttribute(t),null!=n?[y[t],n,g[t]||"invalid",t]:null}).filter(function(e){return null!==e});return t}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t.el,o=a(i),s=t.name,l=[],u=i.getAttribute("required");if(null==u&&(u=i.getAttribute("validate-required")),o=h.unique(o.concat(r)),null!=u){if(p("running 'required' validator on %s",s),!y.required(s,e,n,null))return p("'required' validator failed on %s",s),new b([new m(f.template(g.required,{name:s,label:s,value:n,arg:null}))])}else if(null==n||""==n)return null;for(var c=0,d=o.length;c<d;c++)if(p("running '%s' validator on %s",o[c][3],s),!o[c][0](s,e,n,o[c][1])){p("'%s' validator failed on %s",o[c][3],s);var v=new m(f.template(o[c][2],{name:s,value:n,label:s,arg:o[c][1]}));l.push(v)}return l.length?new b(l):null}function l(e,t){g[e]=t}function u(e,t){y[e]=t}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(10),h=n(4),d=n(12),p=d("views:form:validator"),v=n(15);t.validate=s;var g;!function(e){e.required="<b><% label %></b> is required",e.min="<b><% label %></b> needs to be minimum <% arg %>",e.max="<b><% label %></b> needs to be maximum <% arg %>",e.email="<b><% label %></b> is not an email",e.url="<b><% label %></b> is not an url",e.match="<b><% label %></b> does not match: <b><%arg%></b>"}(g||(g={}));var y;!function(e){function t(e,t,n,r){return!(""==n||null==n)}function n(e,t,n,r){var i=parseInt(r);if(!isNaN(i))return"string"==typeof n?n.length>=i:Array.isArray(n)?n.length>=i:parseInt(n)>=i}function r(e,t,n,r){var i=parseInt(r);if(!isNaN(i))return"string"==typeof n?n.length<=i:Array.isArray(n)?n.length<=i:parseInt(n)<=i}function i(e,t,n,r){var i=t.getFieldByName(r);if(!i)throw new Error("field: "+r+" does not exists");var o=i.editor.value;return h.equal(n,o)}function o(e,t,n,r){return v.isUri(n)}function a(e,t,n,r){function i(e){if(!e)return!1;if(e.length>254)return!1;var t=s.test(e);if(!t)return!1;var n=e.split("@");if(n[0].length>64)return!1;var r=n[1].split(".");return!r.some(function(e){return e.length>63})}return i(n)}e.required=t,e.min=n,e.max=r,e.match=i,e.url=o;var s=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;e.email=a}(y=t.validators||(t.validators={})),t.setMessage=l,t.registerValidator=u;var m=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.message=e,n}return o(t,e),t}(Error);t.ValidateError=m;var b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.errors=e,n}return o(t,e),c(t,[{key:"length",get:function(){return this.errors.length}}]),t}(Error);t.ValidateErrors=b},function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}}function s(){var e;try{e=t.storage.debug}catch(e){}return e}function l(){try{return window.localStorage}catch(e){}}t=e.exports=n(13),t.log=o,t.formatArgs=i,t.save=a,t.load=s,t.useColors=r,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(s())},function(e,t,n){function r(){return t.colors[c++%t.colors.length]}function i(e){function n(){}function i(){var e=i,n=+new Date,o=n-(u||n);e.diff=o,e.prev=u,e.curr=n,u=n,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=r());var a=Array.prototype.slice.call(arguments);a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(n,r){if("%%"===n)return n;s++;var i=t.formatters[r];if("function"==typeof i){var o=a[s];n=i.call(e,o),a.splice(s,1),s--}return n}),"function"==typeof t.formatArgs&&(a=t.formatArgs.apply(e,a));var l=i.log||t.log||console.log.bind(console);l.apply(e,a)}n.enabled=!1,i.enabled=!0;var o=t.enabled(e)?i:n;return o.namespace=e,o}function o(e){t.save(e);for(var n=(e||"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(e=n[i].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function a(){t.enable("")}function s(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=n(14),t.names=[],t.skips=[],t.formatters={};var u,c=0},function(e,t){function n(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*u;case"hours":case"hour":case"hrs":case"hr":case"h":return n*l;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function r(e){return e>=u?Math.round(e/u)+"d":e>=l?Math.round(e/l)+"h":e>=s?Math.round(e/s)+"m":e>=a?Math.round(e/a)+"s":e+"ms"}function i(e){return o(e,u,"day")||o(e,l,"hour")||o(e,s,"minute")||o(e,a,"second")||e+" ms"}function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var a=1e3,s=60*a,l=60*s,u=24*l,c=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?n(e):t.long?i(e):r(e)}},function(e,t,n){(function(e){!function(e){"use strict";function t(e){if(e&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)&&!/%[^0-9a-f]/i.test(e)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e)){var t=[],n="",r="",i="",a="",s="",l="";if(t=o(e),n=t[1],r=t[2],i=t[3],a=t[4],s=t[5],n&&n.length&&i.length>=0){if(r&&r.length){if(0!==i.length&&!/^\//.test(i))return}else if(/^\/\//.test(i))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(n.toLowerCase()))return l+=n+":",r&&r.length&&(l+="//"+r),l+=i,a&&a.length&&(l+="?"+a),s&&s.length&&(l+="#"+s),l}}}function n(e,n){if(t(e)){var r=[],i="",a="",s="",l="",u="",c="",f="";if(r=o(e),i=r[1],a=r[2],s=r[3],u=r[4],c=r[5],i){if(n){if("https"!=i.toLowerCase())return}else if("http"!=i.toLowerCase())return;if(a)return/:(\d+)$/.test(a)&&(l=a.match(/:(\d+)$/)[0],
a=a.replace(/:\d+$/,"")),f+=i+":",f+="//"+a,l&&(f+=l),f+=s,u&&u.length&&(f+="?"+u),c&&c.length&&(f+="#"+c),f}}}function r(e){return n(e,!0)}function i(e){return n(e)||r(e)}e.exports.is_uri=t,e.exports.is_http_uri=n,e.exports.is_https_uri=r,e.exports.is_web_uri=i,e.exports.isUri=t,e.exports.isHttpUri=n,e.exports.isHttpsUri=r,e.exports.isWebUri=i;var o=function(e){var t=e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return t}}(e)}).call(t,n(16)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e){return function(t){a("register editor: %s",e),s[e]=t}}function i(e,t){return s[e]?new s[e](t):null}var o=n(12),a=o("views:form"),s={};t.editor=r,t.getEditor=i},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},c=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=n(4),h=n(5),d=n(9),p=n(17),v=n(2),g=function(){function e(t){o(this,e),this.el=t,this._onChange=f.bind(this._onChange,this),this._onPageResize=f.bind(this._onPageResize,this),this._initInitialSize()}return s(e,[{key:"_onPageResize",value:function(){this.el.clientWidth!==this._state.clientWidth&&this._updateSize()}},{key:"_onChange",value:function(){this._updateSize()}},{key:"_initInitialSize",value:function(){var e=window.getComputedStyle(this.el,null),t=void 0;"vertical"===e.resize?this.el.style.resize="none":"both"===e.resize&&(this.el.style.resize="horizontal"),t="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(t)&&(t=0),this._state={overflowY:e.overflowY,heightOffset:t,clientWidth:this.el.clientWidth},h.addEventListener(this.el,"keyup",this._onChange),h.addEventListener(this.el,"input",this._onChange),h.addEventListener(window,"resize",this._onPageResize),this._updateSize()}},{key:"_changeOverflow",value:function(e){var t=this.el.style.width;this.el.style.width="0px",this.el.offsetWidth,this.el.style.width=t,this._state.overflowY=e,this.el.style.overflowY=e,this._resize()}},{key:"_resize",value:function(){var e=window.pageYOffset,t=document.body.scrollTop,n=this.el.style.height;this.el.style.height="auto";var r=this.el.scrollHeight+this._state.heightOffset;return 0===this.el.scrollHeight?void(this.el.style.height=n):(this.el.style.height=r+"px",this._state.clientWidth=this.el.clientWidth,document.documentElement.scrollTop=e,void(document.body.scrollTop=t))}},{key:"update",value:function(){this._updateSize()}},{key:"_updateSize",value:function(){var e=this.el.style.height;this._resize();var t=window.getComputedStyle(this.el,null);t.height!==this.el.style.height?"visible"!==this._state.overflowY&&this._changeOverflow("visible"):"hidden"!==this._state.overflowY&&this._changeOverflow("hidden"),e!==this.el.style.height}},{key:"destroy",value:function(){h.removeEventListener(this.el,"keyup",this._onChange),h.removeEventListener(this.el,"input",this._onChange),h.removeEventListener(window,"resize",this._onPageResize)}}]),e}();t.AutoSizer=g;var y=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e);var n=this.el.getAttribute("autosize");return null!=n?null==this._autoSizer&&(this._autoSizer=new g(this.el),this.el.style.overflowX="hidden",this.el.style.wordWrap="break-word",this.el.rows=1):this._autoSizer&&(this._autoSizer.destroy(),this._autoSizer=void 0),this}},{key:"setValue",value:function(e){this.el.value=e,this._autoSizer&&this._autoSizer.update()}},{key:"getValue",value:function(){return this.el.value}},{key:"destroy",value:function(){this._autoSizer&&(this._autoSizer.destroy(),this._autoSizer=void 0)}}]),t}(d.BaseEditor);y=u([p.editor("textarea"),v.attributes({events:{keyup:function(){this._prev=this.getValue(),this.triggerMethod("change")},change:function(){this._prev!==this.getValue()&&(this._prev=this.getValue(),this.triggerMethod("change"))}}}),c("design:paramtypes",[])],y)}])});
//# sourceMappingURL=views.form.min.js.map
