!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("views"),require("orange")):"function"==typeof define&&define.amd?define(["views","orange"],t):"object"==typeof exports?exports.form=t(require("views"),require("orange")):(e.views=e.views||{},e.views.form=t(e.views,e.orange))}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}n(r(1));var i=r(10);t.editor=i.editor;var o=r(5);t.BaseEditor=o.BaseEditor,t.BaseLayoutEditor=o.BaseLayoutEditor;var a=r(3);t.Field=a.Field,n(r(7)),r(11)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},f=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=r(2),h=r(3),d=r(4),p=function(e){function t(e){n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e));return r._fields=[],r._isRendered=!1,e=e||{},r._options=d.extend({},{createHelpAreas:!1,validateOnChange:!0,fieldOptions:{}},e),r}return o(t,e),a(t,[{key:"getFieldByName",value:function(e){for(var t=0,r=this.fields.length;t<r;t++)if(this.fields[t].name===e)return this.fields[t];return null}},{key:"render",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this._isRendered=!1,e.silent||this.triggerMethod("before:render"),this.undelegateEvents(),this.renderTemplate(this.getTemplateData()),this._renderFields(),this.delegateEvents(),e.silent||this.triggerMethod("render"),this._isRendered=!0,this._setValue(this.model),this}},{key:"setModel",value:function(e){if(e!==this.model)return l(Object.getPrototypeOf(t.prototype),"setModel",this).call(this,e),this._setValue(e),this.listenTo(e,"change",this._onModelValueChange),this}},{key:"validate",value:function(){return this.fields.map(function(e){return e.validate()}).filter(function(e){return null!=e})}},{key:"_setValue",value:function(e){var t=this;this._isRendered||this.once("render",function(){return t._setValue(e)}),null==e?this.fields.forEach(function(e){return e.editor.clear()}):this.fields.forEach(function(r){void 0!==e.get(r.name)?r.editor.value=e.get(r.name):t.model.set(r.name,r.editor.value,{silent:!0})})}},{key:"_renderFields",value:function(){var e=this;this.triggerMethod("before:render:fields"),this._fields.forEach(function(t){e.stopListening(t),t.destroy()}),this._fields=[];for(var t,r=this.el.querySelectorAll(".field"),n=[],i=0,o=r.length;i<o;i++)try{var a=r[i].querySelector("[name]"),l="";a&&(l=a.getAttribute("name"));var u=d.extend({createHelpArea:this.options.createHelpAreas||!1},this.options.fieldOptions[l]||{},{form:this});t=h.Field.createField(r[i],u),this._fields.push(t),this.listenTo(t,"change",this._onFieldValueChanged)}catch(e){n.push(e)}this._fields.forEach(function(e){e.render()}),n.length&&(console.log(n),this.triggerMethod("render:fields:error",n)),this.triggerMethod("render:fields")}},{key:"_onModelValueChange",value:function(e){for(var t in e.changed){var r=this.getFieldByName(t);null!=r&&(r.editor.value=e.get(t))}}},{key:"_onFieldValueChanged",value:function(e){this.trigger("change"),this.options.validateOnChange&&e.validate()||this.model.set(e.name,e.editor.value)}},{key:"_onFieldEventTriggered",value:function(e,t){if(console.log(e),"change"===e){if(this.trigger("change"),this.options.validateOnChange&&t.validate())return;this.model.set(t.name,t.editor.value)}for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];this.triggerMethod.apply(this,["field:"+e,t].concat(n))}},{key:"destroy",value:function(){return this._fields.forEach(function(e){return e.destroy()}),this._fields=[],l(Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"options",get:function(){return this._options}},{key:"fields",get:function(){return[].concat(this._fields)}}]),t}(c.View);p=s([c.attributes({tagName:"form",events:{}}),f("design:paramtypes",[Object])],p),t.Form=p},function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=r(2),c=r(4),h=r(5),d=r(10),p=void 0,y=p=function(e){function t(e){if(n(this,t),null==e)throw new Error("field options required");if(null==e.form)throw new Error("form required");var r=i(this,Object.getPrototypeOf(t).call(this,e));return r._options=e,r._form=e.form,r}return o(t,e),a(t,[{key:"render",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(e.silent||this.triggerMethod("before:render"),this.undelegateEvents(),this.renderTemplate(this.getTemplateData()),!this._editor){var t=this.el.querySelector("[name]");if(!t)throw new Error("no editor or no input with name attribute");var r=t.getAttribute("form-editor"),n=c.extend({},this._options.editorOptions||{},{el:t});if(r){var i=d.getEditor(r,n);i&&(this.editor=i)}if(null==this.editor){var o=d.getEditor(t.nodeName.toLowerCase(),n);o?this.editor=o:this.editor=new h.Editor(n)}}return this._options.createHelpArea&&this.createHelpArea(),this.editor.render(),this.delegateEvents(),e.silent||this.triggerMethod("render"),this}},{key:"createHelpArea",value:function(){var e=this.el.querySelector(".form-field-helparea");e||(this.triggerMethod("before:helparea"),e=c.createElement("div",{class:"form-field-helparea"}),this.el.appendChild(e))}},{key:"validate",value:function(){if(!this.editor)return null;var e=c.Html.query(this.el),t=this.editor.validate(this._form),r=this.el.querySelector(".form-field-helparea");if(null==t)return e.addClass("has-success").removeClass("has-error"),void(r&&(r.innerHTML=""));if(e.addClass("has-error").removeClass("has-success"),r){var n=void 0;if(1===t.errors.length)n="<span>"+t.errors[0].message+"</span>";else{var i=t.errors.map(function(e){return"<li>"+e.message+"</li>"}).join("");n="<ul>"+i+"</ul>"}r.innerHTML=n}return t}},{key:"_onEditorChange",value:function(){this.triggerMethod("change",this)}},{key:"name",get:function(){return this._editor?this._editor.name:"no-name"}},{key:"label",get:function(){var e=this.el.querySelector("form-field-label");return e?e.textContent:this.name}},{key:"editor",set:function(e){this._editor&&(this.stopListening(this._editor),this._editor.destroy()),this._editor=e,null!=e&&this.listenTo(e,"change",this._onEditorChange)},get:function(){return this._editor}}],[{key:"createField",value:function(e,t){var r=e.querySelector("[name]");if(null==r)throw new Error("field doest not contain an element");var n=c.extend({},t||{},{el:e});return new p(n)}}]),t}(f.View);y=p=u([f.attributes({tagName:"div",className:"form-field"}),s("design:paramtypes",[Object])],y),t.Field=y},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=r(2),c=r(6),h=r(7),d=r(4),p=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),a(t,[{key:"clear",value:function(){this.triggerMethod("before:clear"),this.setValue(null),this.triggerMethod("clear")}},{key:"validate",value:function(e){return h.validate(e,this,this.value)}},{key:"name",get:function(){return this.el.getAttribute("name")}},{key:"value",get:function(){return this.getValue()},set:function(e){d.equal(e,this.getValue())||this.setValue(e)}}]),t}(f.View);t.BaseEditor=p;var y=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),a(t,[{key:"clear",value:function(){this.triggerMethod("before:clear"),this.setValue(null),this.triggerMethod("clear")}},{key:"validate",value:function(e){return h.validate(e,this,this.value)}},{key:"name",get:function(){return this.el.getAttribute("name")}},{key:"value",get:function(){return this.getValue()},set:function(e){d.equal(e,this.getValue())||(this.triggerMethod("before:set:value",e),this.setValue(e),this.triggerMethod("set:value",e))}}]),t}(f.View);t.BaseLayoutEditor=y;var g=function(e){function t(){return n(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),a(t,[{key:"setValue",value:function(e){c.setValue(this.el,e)}},{key:"getValue",value:function(){return c.getValue(this.el)}},{key:"_onKeyPress",value:function(e){this._prev=this.getValue(),this.triggerMethod("change")}},{key:"_onChange",value:function(e){d.equal(this._prev,this.getValue())||(this._prev=this.getValue(),this.triggerMethod("change"))}},{key:"name",get:function(){return this.el.getAttribute("name")}}]),t}(p);g=u([f.attributes({tagName:"input",events:{keyup:"_onKeyPress",change:"_onChange"}}),s("design:paramtypes",[])],g),t.Editor=g},function(e,t){"use strict";function r(e,t){var r=arguments.length<=2||void 0===arguments[2]||arguments[2];return e.replace(u,function(e,n){for(var i=n.split("."),o=i.length,a=t,l=0;l<o;l++){if(a=a[i[l]],a===s){if(r)throw new Error("tim: '"+i[l]+"' not found in "+e);a=""}if(l===o-1)return a}})}function n(e,t){var r=e,i=/checkbox/.test(r.type),o=/radio/.test(r.type),a=i||o,l=Object.prototype.hasOwnProperty.call(r,"value"),u=l||/input|textarea|checkbox/.test(r.nodeName.toLowerCase()),s=/select/i.test(r.nodeName);if(1===arguments.length){if(i)return Boolean(r.checked);if(s)return r.value||"";if(u){var f=r.value||"";return"number"===r.type.toLowerCase()&&(f=parseInt(f),f=isNaN(f)?0:f),f}return r.innerHTML||""}null==t&&(t=""),a?o?String(t)===String(r.value)&&(r.checked=!0):r.checked=t:String(t)!==n(e)&&(u||s?r.value=t:r.innerHTML=t)}function i(e,t){n(e,t)}var o="<%",a="%>",l="[a-z0-9_$][\\.a-z0-9_]*",u=new RegExp(o+"\\s*("+l+")\\s*"+a,"gi"),s=void 0;t.template=r,t.getValue=n,t.setValue=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=Object.keys(y).map(function(t){if("required"===t)return null;var r=e.getAttribute("validate-"+t);return null!=r?[y[t],r,p[t]||"invalid"]:null}).filter(function(e){return null!==e});return t}function l(e,t,r){var n=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=t.el,o=a(i),l=t.name,u=i.getAttribute("required")||i.getAttribute("validate-required"),s=[];if(o=h.unique(o.concat(n)),null!=u){if(!y.required(l,e,r,null))return new v([new g(c.template(p.required,{name:l,label:l,value:r,arg:null}))])}else if(null==r||""==r)return null;for(var f=0,d=o.length;f<d;f++)if(!o[f][0](l,e,r,o[f][1])){var b=new g(c.template(o[f][2],{name:l,value:r,label:l,arg:o[f][1]}));s.push(b)}return s.length?new v(s):null}function u(e,t){p[e]=t}function s(e,t){y[e]=t}var f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(6),h=r(4),d=r(8);t.validate=l;var p;!function(e){e.required="<b><% label %></b> is required",e.min="<b><% label %></b> needs to be minimum <% arg %>",e.max="<b><% label %></b> needs to be maximum <% arg %>",e.email="<b><% label %></b> is not an email",e.url="<b><% label %></b> is not an url",e.match="<b><% label %></b> does not match: <b><%arg%></b>"}(p||(p={}));var y;!function(e){function t(e,t,r,n){return!(""==r||null==r)}function r(e,t,r,n){var i=parseInt(n);if(!isNaN(i))return"string"==typeof r?r.length>=i:Array.isArray(r)?r.length>=i:parseInt(r)>=i}function n(e,t,r,n){var i=parseInt(n);if(!isNaN(i))return"string"==typeof r?r.length<=i:Array.isArray(r)?r.length<=i:parseInt(r)<=i}function i(e,t,r,n){var i=t.getFieldByName(n);if(!i)throw new Error("field: "+n+" does not exists");var o=i.editor.value;return h.equal(r,o)}function o(e,t,r,n){return d.isUri(r)}function a(e,t,r,n){function i(e){if(!e)return!1;if(e.length>254)return!1;var t=l.test(e);if(!t)return!1;var r=e.split("@");if(r[0].length>64)return!1;var n=r[1].split(".");return!n.some(function(e){return e.length>63})}return i(r)}e.required=t,e.min=r,e.max=n,e.match=i,e.url=o;var l=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;e.email=a}(y=t.validators||(t.validators={})),t.setMessage=u,t.registerValidator=s;var g=function(e){function t(e){n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this,e));return r.message=e,r}return o(t,e),t}(Error);t.ValidateError=g;var v=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this));return r.errors=e,r}return o(t,e),f(t,[{key:"length",get:function(){return this.errors.length}}]),t}(Error);t.ValidateErrors=v},function(e,t,r){(function(e){!function(e){"use strict";function t(e){if(e&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)&&!/%[^0-9a-f]/i.test(e)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e)){var t=[],r="",n="",i="",a="",l="",u="";if(t=o(e),r=t[1],n=t[2],i=t[3],a=t[4],l=t[5],r&&r.length&&i.length>=0){if(n&&n.length){if(0!==i.length&&!/^\//.test(i))return}else if(/^\/\//.test(i))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase()))return u+=r+":",n&&n.length&&(u+="//"+n),u+=i,a&&a.length&&(u+="?"+a),l&&l.length&&(u+="#"+l),u}}}function r(e,r){if(t(e)){var n=[],i="",a="",l="",u="",s="",f="",c="";if(n=o(e),i=n[1],a=n[2],l=n[3],s=n[4],f=n[5],i){if(r){if("https"!=i.toLowerCase())return}else if("http"!=i.toLowerCase())return;if(a)return/:(\d+)$/.test(a)&&(u=a.match(/:(\d+)$/)[0],a=a.replace(/:\d+$/,"")),c+=i+":",c+="//"+a,u&&(c+=u),c+=l,s&&s.length&&(c+="?"+s),f&&f.length&&(c+="#"+f),c}}}function n(e){return r(e,!0)}function i(e){return r(e)||n(e)}e.exports.is_uri=t,e.exports.is_http_uri=r,e.exports.is_https_uri=n,e.exports.is_web_uri=i,e.exports.isUri=t,e.exports.isHttpUri=r,e.exports.isHttpsUri=n,e.exports.isWebUri=i;var o=function(e){var t=e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return t}}(e)}).call(t,r(9)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function r(e){return function(t){i[e]=t}}function n(e,t){return i[e]?new i[e](t):null}var i={};t.editor=r,t.getEditor=n},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},f=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=r(4),h=r(5),d=r(10),p=r(2),y=function(){function e(t){o(this,e),this.el=t,this._onChange=c.bind(this._onChange,this),this._onPageResize=c.bind(this._onPageResize,this),this._initInitialSize()}return l(e,[{key:"_onPageResize",value:function(){this.el.clientWidth!==this._state.clientWidth&&this._updateSize()}},{key:"_onChange",value:function(){this._updateSize()}},{key:"_initInitialSize",value:function(){var e=window.getComputedStyle(this.el,null),t=void 0;"vertical"===e.resize?this.el.style.resize="none":"both"===e.resize&&(this.el.style.resize="horizontal"),t="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(t)&&(t=0),this._state={overflowY:e.overflowY,heightOffset:t,clientWidth:this.el.clientWidth},c.addEventListener(this.el,"keyup",this._onChange),c.addEventListener(this.el,"input",this._onChange),c.addEventListener(window,"resize",this._onPageResize),this._updateSize()}},{key:"_changeOverflow",value:function(e){var t=this.el.style.width;this.el.style.width="0px",this.el.offsetWidth,this.el.style.width=t,this._state.overflowY=e,this.el.style.overflowY=e,this._resize()}},{key:"_resize",value:function(){var e=window.pageYOffset,t=document.body.scrollTop,r=this.el.style.height;this.el.style.height="auto";var n=this.el.scrollHeight+this._state.heightOffset;return 0===this.el.scrollHeight?void(this.el.style.height=r):(this.el.style.height=n+"px",this._state.clientWidth=this.el.clientWidth,document.documentElement.scrollTop=e,void(document.body.scrollTop=t))}},{key:"update",value:function(){this._updateSize()}},{key:"_updateSize",value:function(){var e=this.el.style.height;this._resize();var t=window.getComputedStyle(this.el,null);t.height!==this.el.style.height?"visible"!==this._state.overflowY&&this._changeOverflow("visible"):"hidden"!==this._state.overflowY&&this._changeOverflow("hidden"),e!==this.el.style.height}},{key:"destroy",value:function(){c.removeEventListener(this.el,"keyup",this._onChange),c.removeEventListener(this.el,"input",this._onChange),c.removeEventListener(window,"resize",this._onPageResize)}}]),e}();t.AutoSizer=y;var g=function(e){function t(e){return o(this,t),n(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(e){a(Object.getPrototypeOf(t.prototype),"render",this).call(this,e);var r=this.el.getAttribute("autosize");return null!=r?null==this._autoSizer&&(this._autoSizer=new y(this.el),this.el.style.overflowX="hidden",this.el.style.wordWrap="break-word",this.el.rows=1):this._autoSizer&&(this._autoSizer.destroy(),this._autoSizer=void 0),this}},{key:"setValue",value:function(e){this.el.value=e,this._autoSizer&&this._autoSizer.update()}},{key:"getValue",value:function(){return this.el.value}},{key:"destroy",value:function(){this._autoSizer&&(this._autoSizer.destroy(),this._autoSizer=void 0)}}]),t}(h.BaseEditor);g=s([d.editor("textarea"),p.attributes({events:{keyup:function(){this._prev=this.getValue(),this.triggerMethod("change")},change:function(){this._prev!==this.getValue()&&(this._prev=this.getValue(),this.triggerMethod("change"))}}}),f("design:paramtypes",[Object])],g)}])});
//# sourceMappingURL=views.form.min.js.map
