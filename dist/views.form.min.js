!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("views"),require("orange")):"function"==typeof define&&define.amd?define(["views","orange"],t):"object"==typeof exports?exports.form=t(require("views"),require("orange")):(e.views=e.views||{},e.views.form=t(e.views,e.orange))}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(1));var i=n(10);t.editor=i.editor;var o=n(5);t.BaseEditor=o.BaseEditor,t.BaseLayoutEditor=o.BaseLayoutEditor;var a=n(3);t.Field=a.Field,r(n(7)),n(11)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},f=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=n(2),h=n(3),d=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n._fields=[],n._isRendered=!1,n._options=e||{},n}return o(t,e),a(t,[{key:"getFieldByName",value:function(e){for(var t=0,n=this.fields.length;t<n;t++)if(this.fields[t].name===e)return this.fields[t];return null}},{key:"render",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this._isRendered=!1,e.silent||this.triggerMethod("before:render"),this.undelegateEvents(),this.renderTemplate(this.getTemplateData()),this._renderFields(),this.delegateEvents(),e.silent||this.triggerMethod("render"),this._isRendered=!0,this._setValue(this.model),this}},{key:"setModel",value:function(e){return l(Object.getPrototypeOf(t.prototype),"setModel",this).call(this,e),this._setValue(e),this.listenTo(e,"change",this._onModelValueChange),this}},{key:"validate",value:function(){return this.fields.map(function(e){return e.validate()}).filter(function(e){return null!=e})}},{key:"_setValue",value:function(e){var t=this;this._isRendered||this.once("render",function(){return t._setValue(e)}),null==e?this.fields.forEach(function(e){return e.editor.clear()}):this.fields.forEach(function(n){void 0!==e.get(n.name)?n.editor.value=e.get(n.name):t.model.set(n.name,n.editor.value)})}},{key:"_renderFields",value:function(){var e=this;this.triggerMethod("before:render:fields"),this._fields.forEach(function(t){e.stopListening(t),t.destroy()}),this._fields=[];for(var t,n=this.el.querySelectorAll(".field"),r=[],i=0,o=n.length;i<o;i++)try{t=h.Field.createField(n[i],{form:this,createHelpArea:this.options.createHelpAreas||!1}),this._fields.push(t),this.listenTo(t,"change",this._onFieldValueChange)}catch(e){r.push(e)}this._fields.forEach(function(e){e.render()}),r.length&&(console.log(r),this.triggerMethod("render:fields:error",r)),this.triggerMethod("render:fields")}},{key:"_onModelValueChange",value:function(e){for(var t in e.changed){var n=this.getFieldByName(t);null!=n&&(n.editor.value=e.get(t))}}},{key:"_onFieldValueChange",value:function(e){this.trigger("change"),this.options.validateOnChange&&e.validate()||this.model.set(e.name,e.editor.value)}},{key:"destroy",value:function(){return this._fields.forEach(function(e){return e.destroy()}),this._fields=[],l(Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"options",get:function(){return this._options}},{key:"fields",get:function(){return[].concat(this._fields)}}]),t}(c.View);d=s([c.attributes({tagName:"form",events:{}}),f("design:paramtypes",[Object])],d),t.Form=d},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=n(2),c=n(4),h=n(5),d=n(10),p=void 0,y=p=function(e){function t(e){if(r(this,t),null==e)throw new Error("field options required");if(null==e.form)throw new Error("form required");var n=i(this,Object.getPrototypeOf(t).call(this,e));return n._options=e,n._form=e.form,n}return o(t,e),a(t,[{key:"render",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(e.silent||this.triggerMethod("before:render"),this.undelegateEvents(),this.renderTemplate(this.getTemplateData()),!this._editor){var t=this.el.querySelector("[name]");if(!t)throw new Error("no editor or no input with name attribute");var n=t.getAttribute("form-editor"),r=c.extend({},this._options.editorOptions||{},{el:t});if(n){var i=d.getEditor(n,r);i&&(this.editor=i)}if(null==this.editor){var o=d.getEditor(t.nodeName.toLowerCase(),r);o?this.editor=o:this.editor=new h.Editor(r)}}return this._options.createHelpArea&&this.createHelpArea(),this.editor.render(),this.delegateEvents(),e.silent||this.triggerMethod("render"),this}},{key:"createHelpArea",value:function(){var e=this.el.querySelector(".form-field-helparea");e||(this.triggerMethod("before:helparea"),e=c.createElement("div",{class:"form-field-helparea"}),this.el.appendChild(e))}},{key:"validate",value:function(){if(!this.editor)return null;var e=c.Html.query(this.el),t=this.editor.validate(this._form),n=this.el.querySelector(".form-field-helparea");if(null==t)return e.addClass("has-success").removeClass("has-error"),void(n&&(n.innerHTML=""));if(e.addClass("has-error").removeClass("has-success"),n){var r=void 0;if(1===t.errors.length)r="<span>"+t.errors[0].message+"</span>";else{var i=t.errors.map(function(e){return"<li>"+e.message+"</li>"}).join("");r="<ul>"+i+"</ul>"}n.innerHTML=r}return t}},{key:"_onEditorChange",value:function(){this.triggerMethod("change",this)}},{key:"name",get:function(){return this._editor?this._editor.name:"no-name"}},{key:"label",get:function(){var e=this.el.querySelector("form-field-label");return e?e.textContent:this.name}},{key:"editor",set:function(e){this._editor&&(this.stopListening(this._editor),this._editor.destroy()),this._editor=e,this.listenTo(e,"change",this._onEditorChange)},get:function(){return this._editor}}],[{key:"createField",value:function(e,t){var n=e.querySelector("[name]");if(null==n)throw new Error("field doest not contain an element");var r=c.extend({},t||{},{el:e});return new p(r)}}]),t}(f.View);y=p=u([f.attributes({tagName:"div",className:"form-field"}),s("design:paramtypes",[Object])],y),t.Field=y},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=n(2),c=n(6),h=n(7),d=n(4),p=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),a(t,[{key:"validate",value:function(e){return h.validate(e,this,this.value)}},{key:"name",get:function(){return this.el.getAttribute("name")}},{key:"value",get:function(){return this.getValue()},set:function(e){d.equal(e,this.getValue())||this.setValue(e)}}]),t}(f.View);t.BaseEditor=p;var y=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),a(t,[{key:"validate",value:function(e){return h.validate(e,this,this.value)}},{key:"name",get:function(){return this.el.getAttribute("name")}},{key:"value",get:function(){return this.getValue()},set:function(e){d.equal(e,this.getValue())||this.setValue(e)}}]),t}(f.View);t.BaseLayoutEditor=y;var v=function(e){function t(){return r(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return o(t,e),a(t,[{key:"setValue",value:function(e){c.setValue(this.el,e)}},{key:"getValue",value:function(){return c.getValue(this.el)}},{key:"clear",value:function(){c.setValue(this.el,"")}},{key:"_onKeyPress",value:function(e){this._prev=this.getValue(),this.triggerMethod("change")}},{key:"_onChange",value:function(e){d.equal(this._prev,this.getValue())||(this._prev=this.getValue(),this.triggerMethod("change"))}},{key:"name",get:function(){return this.el.getAttribute("name")}}]),t}(p);v=u([f.attributes({tagName:"input",events:{keyup:"_onKeyPress",change:"_onChange"}}),s("design:paramtypes",[])],v),t.Editor=v},function(e,t){"use strict";function n(e,t){var n=arguments.length<=2||void 0===arguments[2]||arguments[2];return e.replace(u,function(e,r){for(var i=r.split("."),o=i.length,a=t,l=0;l<o;l++){if(a=a[i[l]],a===s){if(n)throw new Error("tim: '"+i[l]+"' not found in "+e);a=""}if(l===o-1)return a}})}function r(e,t){var n=e,i=/checkbox/.test(n.type),o=/radio/.test(n.type),a=i||o,l=Object.prototype.hasOwnProperty.call(n,"value"),u=l||/input|textarea|checkbox/.test(n.nodeName.toLowerCase()),s=/select/i.test(n.nodeName);if(1===arguments.length){if(i)return Boolean(n.checked);if(s)return n.value||"";if(u){var f=n.value||"";return"number"===n.type.toLowerCase()&&(f=parseInt(f),f=isNaN(f)?0:f),f}return n.innerHTML||""}null==t&&(t=""),a?o?String(t)===String(n.value)&&(n.checked=!0):n.checked=t:String(t)!==r(e)&&(u||s?n.value=t:n.innerHTML=t)}function i(e,t){r(e,t)}var o="<%",a="%>",l="[a-z0-9_$][\\.a-z0-9_]*",u=new RegExp(o+"\\s*("+l+")\\s*"+a,"gi"),s=void 0;t.template=n,t.getValue=r,t.setValue=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=Object.keys(y).map(function(t){if("required"===t)return null;var n=e.getAttribute("validate-"+t);return null!=n?[y[t],n,p[t]||"invalid"]:null}).filter(function(e){return null!==e});return t}function l(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=t.el,o=a(i),l=t.name,u=i.getAttribute("required")||i.getAttribute("validate-required"),s=[];if(o=h.unique(o.concat(r)),null!=u){if(!y.required(l,e,n,null))return new g([new v(c.template(p.required,{name:l,label:l,value:n,arg:null}))])}else if(null==n||""==n)return null;for(var f=0,d=o.length;f<d;f++)if(!o[f][0](l,e,n,o[f][1])){var b=new v(c.template(o[f][2],{name:l,value:n,label:l,arg:o[f][1]}));s.push(b)}return s.length?new g(s):null}function u(e,t){p[e]=t}function s(e,t){y[e]=t}var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(6),h=n(4),d=n(8);t.validate=l;var p;!function(e){e.required="<b><% label %></b> is required",e.min="<b><% label %></b> needs to be minimum <% arg %>",e.max="<b><% label %></b> needs to be maximum <% arg %>",e.email="<b><% label %></b> is not an email",e.url="<b><% label %></b> is not an url",e.match="<b><% label %></b> does not match: <b><%arg%></b>"}(p||(p={}));var y;!function(e){function t(e,t,n,r){return!(""==n||null==n)}function n(e,t,n,r){var i=parseInt(r);if(!isNaN(i))return"string"==typeof n?n.length>=i:Array.isArray(n)?n.length>=i:parseInt(n)>=i}function r(e,t,n,r){var i=parseInt(r);if(!isNaN(i))return"string"==typeof n?n.length<=i:Array.isArray(n)?n.length<=i:parseInt(n)<=i}function i(e,t,n,r){var i=t.getFieldByName(r);if(!i)throw new Error("field: "+r+" does not exists");var o=i.editor.value;return h.equal(n,o)}function o(e,t,n,r){return d.isUri(n)}function a(e,t,n,r){function i(e){if(!e)return!1;if(e.length>254)return!1;var t=l.test(e);if(!t)return!1;var n=e.split("@");if(n[0].length>64)return!1;var r=n[1].split(".");return!r.some(function(e){return e.length>63})}return i(n)}e.required=t,e.min=n,e.max=r,e.match=i,e.url=o;var l=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;e.email=a}(y=t.validators||(t.validators={})),t.setMessage=u,t.registerValidator=s;var v=function(e){function t(e){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.message=e,n}return o(t,e),t}(Error);t.ValidateError=v;var g=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this));return n.errors=e,n}return o(t,e),f(t,[{key:"length",get:function(){return this.errors.length}}]),t}(Error);t.ValidateErrors=g},function(e,t,n){(function(e){!function(e){"use strict";function t(e){if(e&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)&&!/%[^0-9a-f]/i.test(e)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e)){var t=[],n="",r="",i="",a="",l="",u="";if(t=o(e),n=t[1],r=t[2],i=t[3],a=t[4],l=t[5],n&&n.length&&i.length>=0){if(r&&r.length){if(0!==i.length&&!/^\//.test(i))return}else if(/^\/\//.test(i))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(n.toLowerCase()))return u+=n+":",r&&r.length&&(u+="//"+r),u+=i,a&&a.length&&(u+="?"+a),l&&l.length&&(u+="#"+l),u}}}function n(e,n){if(t(e)){var r=[],i="",a="",l="",u="",s="",f="",c="";if(r=o(e),i=r[1],a=r[2],l=r[3],s=r[4],f=r[5],i){if(n){if("https"!=i.toLowerCase())return}else if("http"!=i.toLowerCase())return;if(a)return/:(\d+)$/.test(a)&&(u=a.match(/:(\d+)$/)[0],a=a.replace(/:\d+$/,"")),c+=i+":",c+="//"+a,u&&(c+=u),c+=l,s&&s.length&&(c+="?"+s),f&&f.length&&(c+="#"+f),c}}}function r(e){return n(e,!0)}function i(e){return n(e)||r(e)}e.exports.is_uri=t,e.exports.is_http_uri=n,e.exports.is_https_uri=r,e.exports.is_web_uri=i,e.exports.isUri=t,e.exports.isHttpUri=n,e.exports.isHttpsUri=r,e.exports.isWebUri=i;var o=function(e){var t=e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return t}}(e)}).call(t,n(9)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";function n(e){return function(t){i[e]=t}}function r(e,t){return i[e]?new i[e](t):null}var i={};t.editor=n,t.getEditor=r},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},f=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=n(4),h=n(5),d=n(10),p=n(2),y=function(){function e(t){o(this,e),this.el=t,this._onChange=c.bind(this._onChange,this),this._onPageResize=c.bind(this._onPageResize,this),this._initInitialSize()}return l(e,[{key:"_onPageResize",value:function(){this.el.clientWidth!==this._state.clientWidth&&this._updateSize()}},{key:"_onChange",value:function(){this._updateSize()}},{key:"_initInitialSize",value:function(){var e=window.getComputedStyle(this.el,null),t=void 0;"vertical"===e.resize?this.el.style.resize="none":"both"===e.resize&&(this.el.style.resize="horizontal"),t="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(t)&&(t=0),this._state={overflowY:e.overflowY,heightOffset:t,clientWidth:this.el.clientWidth},c.addEventListener(this.el,"keyup",this._onChange),c.addEventListener(this.el,"input",this._onChange),c.addEventListener(window,"resize",this._onPageResize),this._updateSize()}},{key:"_changeOverflow",value:function(e){var t=this.el.style.width;this.el.style.width="0px",this.el.offsetWidth,this.el.style.width=t,this._state.overflowY=e,this.el.style.overflowY=e,this._resize()}},{key:"_resize",value:function(){var e=window.pageYOffset,t=document.body.scrollTop,n=this.el.style.height;this.el.style.height="auto";var r=this.el.scrollHeight+this._state.heightOffset;return 0===this.el.scrollHeight?void(this.el.style.height=n):(this.el.style.height=r+"px",this._state.clientWidth=this.el.clientWidth,document.documentElement.scrollTop=e,void(document.body.scrollTop=t))}},{key:"update",value:function(){this._updateSize()}},{key:"_updateSize",value:function(){var e=this.el.style.height;this._resize();var t=window.getComputedStyle(this.el,null);t.height!==this.el.style.height?"visible"!==this._state.overflowY&&this._changeOverflow("visible"):"hidden"!==this._state.overflowY&&this._changeOverflow("hidden"),e!==this.el.style.height}},{key:"destroy",value:function(){c.removeEventListener(this.el,"keyup",this._onChange),c.removeEventListener(this.el,"input",this._onChange),c.removeEventListener(window,"resize",this._onPageResize)}}]),e}();t.AutoSizer=y;var v=function(e){function t(e){return o(this,t),r(this,Object.getPrototypeOf(t).call(this,e))}return i(t,e),l(t,[{key:"render",value:function(e){a(Object.getPrototypeOf(t.prototype),"render",this).call(this,e);var n=this.el.getAttribute("autosize");return null!=n?null==this._autoSizer&&(this._autoSizer=new y(this.el),this.el.style.overflowX="hidden",this.el.style.wordWrap="break-word",this.el.rows=1):this._autoSizer&&(this._autoSizer.destroy(),this._autoSizer=void 0),this}},{key:"setValue",value:function(e){this.el.value=e,this._autoSizer&&this._autoSizer.update()}},{key:"getValue",value:function(){return this.el.value}},{key:"clear",value:function(){this.el.textContent=""}},{key:"destroy",value:function(){this._autoSizer&&(this._autoSizer.destroy(),this._autoSizer=void 0)}}]),t}(h.BaseEditor);v=s([d.editor("textarea"),p.attributes({events:{keyup:function(){this._prev=this.getValue(),this.triggerMethod("change")},change:function(){this._prev!==this.getValue()&&(this._prev=this.getValue(),this.triggerMethod("change"))}}}),f("design:paramtypes",[Object])],v)}])});